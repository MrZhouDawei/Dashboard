  <!-- Barra di navigazione -->
  <div class="step-navigation">
    <button (click)="goToStep(1)" >1</button>
    <button (click)="goToStep(2)" >2</button>
    <button (click)="goToStep(3)" >3</button>
    <button (click)="goToStep(4)" >4</button>
  </div>

  <h2 class="form-title text-center" *ngIf="!input">Create Dashboard</h2>
  <h2 class="form-title text-center" *ngIf="input">Edit Dashboard</h2>
  <div class="message-box" *ngIf="message" [ngClass]="messageType">
    {{ message }}
  </div>
  <div class="form-container">

    <div *ngIf="currentStep === 1">
      <form [formGroup]="dashboardForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="dashboardName">Dashboard Name:</label>
          <input type="text" id="dashboardName" formControlName="name"  [disabled]="input !== null" autocomplete="off" required>
        </div>

        <div class="form-group">
          <label for="pageTitle">pageTitle:</label>
          <input type="text" id="pageTitle" formControlName="pageTitle" autocomplete="off" required>
        </div>

        <div class="form-group">
          <label for="helpDocUrl">Help Document URL:</label>
          <input type="url" id="helpDocUrl" formControlName="helpDocUrl" autocomplete="off" required>
        </div>
        <div *ngIf="dashboardForm.get('helpDocUrl')?.hasError('invalidUrl')">
          <p class="error-message">The provided URL is not valid or reachable.</p>
        </div>



        <button type="button" (click)="nextStep()"
                [disabled]="!(dashboardForm.get('name')?.valid && dashboardForm.get('helpDocUrl')?.valid)">Next</button>
      </form>
    </div>

    <div *ngIf="currentStep === 2">
      <form [formGroup]="dashboardForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="helpDocHeight">Help Document Height (Min. 1):</label>
          <input type="number" id="helpDocHeight" formControlName="helpDocHeight" autocomplete="off"  required>
        </div>

        <div class="form-group">
          <label for="helpDocWidth">Help Document Width (Min. 1):</label>
          <input type="number" id="helpDocWidth" formControlName="helpDocWidth" autocomplete="off" required>
        </div>

        <button type="button" (click)="prevStep()">Previous</button>
        <button type="button" (click)="nextStep()"
                [disabled]="!(dashboardForm.get('helpDocHeight')?.valid && dashboardForm.get('helpDocWidth')?.valid)">Next</button>
      </form>
    </div>

    <div *ngIf="currentStep === 3">
      <form [formGroup]="dashboardForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>Coordinates X:</label>
          <input type="number" formControlName="coordX" placeholder="X Coordinate" autocomplete="off" required>
        </div>

        <div class="form-group">
          <label>Coordinate Y:</label>
          <input type="number" formControlName="coordY" placeholder="Y Coordinate" autocomplete="off" required>
        </div>

        <button type="button" (click)="prevStep()">Previous</button>
        <button type="button" (click)="nextStep()"
                [disabled]="!(dashboardForm.get('coordX')?.valid && dashboardForm.get('coordY')?.valid)">Next</button>
      </form>
    </div>

    <div *ngIf="currentStep === 4">
      <form [formGroup]="dashboardForm" (ngSubmit)="onSubmit()">
        <autocomplete-dashboard [storedWidgets]="selectedWidgetIds" (widgetSelectionChange)="onWidgetsSelected($event)"></autocomplete-dashboard>

        <button type="button" (click)="prevStep()">Previous</button>
        <button type="submit" [disabled]="!dashboardForm.valid || selectedWidgetIds.length === 0">Submit</button>
      </form>
    </div>
  </div>
